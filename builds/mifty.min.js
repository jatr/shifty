/**
Mifty - A custom build of Shifty for Morf.js: https://github.com/joelambert/morf
By Jeremy Kahn - jeremyckahn@gmail.com

  v0.4.3

For instructions on how to use Shifty, please consult the README: https://github.com/jeremyckahn/shifty/blob/master/README.md

MIT Lincense.  This code free to use, modify, distribute and enjoy.

*/

(function(c){function a(){return+new Date}function b(a,d){for(var m in a)a.hasOwnProperty(m)&&d(a,m)}function e(a,d){b(d,function(d,b){a[b]=d[b]});return a}function i(a,d){b(d,function(d,b){typeof a[b]==="undefined"&&(a[b]=d[b])});return a}function h(a,d,b){var c,a=(a-d.timestamp)/d.duration;for(c in b.current)b.current.hasOwnProperty(c)&&d.to.hasOwnProperty(c)&&(b.current[c]=d.originalState[c]+(d.to[c]-d.originalState[c])*d.easingFunc(a));return b.current}function k(a,d,b,c){var e;for(e=0;e<d[a].length;e++)d[a][e].apply(b,
c)}function j(a,d,e){b(c.Tweenable.prototype.filter,function(b,c){b[c][a]&&b[c][a].apply(d,e)})}function l(f,b){var c;c=a();c<f.timestamp+f.duration&&b.isAnimating?(j("beforeTween",f.owner,[b.current,f.originalState,f.to]),h(c,f,b),j("afterTween",f.owner,[b.current,f.originalState,f.to]),f.hook.step&&k("step",f.hook,f.owner,[b.current]),f.step.call(b.current),b.loopId=setTimeout(function(){l(f,b)},1E3/f.owner.fps)):f.owner.stop(!0)}function g(a){a=a||{};this._hook={};this._tweenParams={owner:this,
hook:this._hook,data:{}};this._state={};this._state.current=a.initialState||{};this.fps=a.fps||30;this.easing=a.easing||"linear";this.duration=a.duration||500;return this}g.prototype.tween=function(b,c,h,g,k){var n=this;if(!this._state.isAnimating)return this._state.loopId=0,this._state.pausedAtTime=null,c?(this._tweenParams.step=function(){},this._state.current=b||{},this._tweenParams.to=c||{},this._tweenParams.duration=h||this.duration,this._tweenParams.callback=g||function(){},this._tweenParams.easing=
k||this.easing):(this._tweenParams.step=b.step||function(){},this._tweenParams.callback=b.callback||function(){},this._state.current=b.from||{},this._tweenParams.to=b.to||b.target||{},this._tweenParams.duration=b.duration||this.duration,this._tweenParams.easing=b.easing||this.easing),this._tweenParams.timestamp=a(),this._tweenParams.easingFunc=this.formula[this._tweenParams.easing]||this.formula.linear,i(this._state.current,this._tweenParams.to),i(this._tweenParams.to,this._state.current),j("tweenCreated",
this._tweenParams.owner,[this._state.current,this._tweenParams.originalState,this._tweenParams.to]),this._tweenParams.originalState=e({},this._state.current),this._state.isAnimating=!0,setTimeout(function(){l(n._tweenParams,n._state)},1E3/this.fps),this};g.prototype.to=function(a,b,c,e){typeof b==="undefined"?(a.from=this.get(),this.tween(a)):this.tween(this.get(),a,b,c,e);return this};g.prototype.get=function(){return this._state.current};g.prototype.set=function(a){this._state.current=a||{};return this};
g.prototype.stop=function(a){clearTimeout(this._state.loopId);this._state.isAnimating=!1;a&&(e(this._state.current,this._tweenParams.to),j("afterTweenEnd",this,[this._state.current,this._tweenParams.originalState,this._tweenParams.to]),this._tweenParams.callback.call(this._state.current));return this};g.prototype.pause=function(){clearTimeout(this._state.loopId);this._state.pausedAtTime=a();this._state.isPaused=!0;return this};g.prototype.resume=function(){var a=this;this._state.isPaused&&(this._tweenParams.timestamp+=
this._state.pausedAtTime-this._tweenParams.timestamp);setTimeout(function(){l(a._tweenParams,a._state)},1E3/this.fps);return this};g.prototype.hookAdd=function(a,b){this._hook.hasOwnProperty(a)||(this._hook[a]=[]);this._hook[a].push(b)};g.prototype.hookRemove=function(a,b){var c;if(this._hook.hasOwnProperty(a))if(b)for(c=this._hook[a].length;c>=0;c++)this._hook[a][c]===b&&this._hook[a].splice(c,1);else this._hook[a]=[]};g.prototype.filter={};g.util={now:a,each:b,tweenProps:h,applyFilter:j,simpleCopy:e,
weakCopy:i};g.prototype.formula={linear:function(a){return a}};if(typeof c.Tweenable==="undefined")c.Tweenable=g})(this);
(function(c){c.Tweenable.util.simpleCopy(c.Tweenable.prototype.formula,{easeInQuad:function(a){return Math.pow(a,2)},easeOutQuad:function(a){return-(Math.pow(a-1,2)-1)},easeInOutQuad:function(a){return(a/=0.5)<1?0.5*Math.pow(a,2):-0.5*((a-=2)*a-2)},easeInCubic:function(a){return Math.pow(a,3)},easeOutCubic:function(a){return Math.pow(a-1,3)+1},easeInOutCubic:function(a){return(a/=0.5)<1?0.5*Math.pow(a,3):0.5*(Math.pow(a-2,3)+2)},easeInQuart:function(a){return Math.pow(a,4)},easeOutQuart:function(a){return-(Math.pow(a-
1,4)-1)},easeInOutQuart:function(a){return(a/=0.5)<1?0.5*Math.pow(a,4):-0.5*((a-=2)*Math.pow(a,3)-2)},easeInQuint:function(a){return Math.pow(a,5)},easeOutQuint:function(a){return Math.pow(a-1,5)+1},easeInOutQuint:function(a){return(a/=0.5)<1?0.5*Math.pow(a,5):0.5*(Math.pow(a-2,5)+2)},easeInSine:function(a){return-Math.cos(a*(Math.PI/2))+1},easeOutSine:function(a){return Math.sin(a*(Math.PI/2))},easeInOutSine:function(a){return-0.5*(Math.cos(Math.PI*a)-1)},easeInExpo:function(a){return a==0?0:Math.pow(2,
10*(a-1))},easeOutExpo:function(a){return a==1?1:-Math.pow(2,-10*a)+1},easeInOutExpo:function(a){return a==0?0:a==1?1:(a/=0.5)<1?0.5*Math.pow(2,10*(a-1)):0.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return-(Math.sqrt(1-a*a)-1)},easeOutCirc:function(a){return Math.sqrt(1-Math.pow(a-1,2))},easeInOutCirc:function(a){return(a/=0.5)<1?-0.5*(Math.sqrt(1-a*a)-1):0.5*(Math.sqrt(1-(a-=2)*a)+1)},easeOutBounce:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*
(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},easeInBack:function(a){return a*a*(2.70158*a-1.70158)},easeOutBack:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},easeInOutBack:function(a){var b=1.70158;return(a/=0.5)<1?0.5*a*a*(((b*=1.525)+1)*a-b):0.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},elastic:function(a){return-1*Math.pow(4,-8*a)*Math.sin((a*6-1)*2*Math.PI/2)+1},swingFromTo:function(a){var b=1.70158;return(a/=0.5)<1?0.5*a*a*(((b*=1.525)+1)*a-b):0.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},
swingFrom:function(a){return a*a*(2.70158*a-1.70158)},swingTo:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},bounce:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bouncePast:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?2-(7.5625*(a-=1.5/2.75)*a+0.75):a<2.5/2.75?2-(7.5625*(a-=2.25/2.75)*a+0.9375):2-(7.5625*(a-=2.625/2.75)*a+0.984375)},easeFromTo:function(a){return(a/=0.5)<1?0.5*Math.pow(a,
4):-0.5*((a-=2)*Math.pow(a,3)-2)},easeFrom:function(a){return Math.pow(a,4)},easeTo:function(a){return Math.pow(a,0.25)}})})(this);
(function(c){if(c.Tweenable)c.Tweenable.util.interpolate=function(a,b,e,i){var h;if(a&&a.from)b=a.to,e=a.position,i=a.easing,a=a.from;h=c.Tweenable.util.simpleCopy({},a);c.Tweenable.util.applyFilter("tweenCreated",h,[h,a,b]);c.Tweenable.util.applyFilter("beforeTween",h,[h,a,b]);e=c.Tweenable.util.tweenProps(e,{originalState:a,to:b,timestamp:0,duration:1,easingFunc:c.Tweenable.prototype.formula[i]||c.Tweenable.prototype.formula.linear},{current:h});c.Tweenable.util.applyFilter("afterTween",e,[e,a,
b]);return e},c.Tweenable.prototype.interpolate=function(a,b,e){a=c.Tweenable.util.interpolate(this.get(),a,b,e);this.set(a);return a}})(this);
(function(c){function a(a){var i;i=c.Tweenable.util.weakCopy(this._tweenParams&&this._tweenParams.data.clamps||{},b.clamps);c.Tweenable.util.each(i,function(b,c){a.hasOwnProperty(c)&&(a[c]=Math.max(a[c],i[c].bottom),a[c]=Math.min(a[c],i[c].top))})}var b;if(c.Tweenable)b=c.Tweenable.util.setClamp=function(a,c,h){b.clamps[a]={bottom:c,top:h}},c.Tweenable.util.removeClamp=function(a){return delete b.clamps[a]},c.Tweenable.prototype.setClamp=function(a,b,c){if(!this._tweenParams.data.clamps)this._tweenParams.data.clamps=
{};this._tweenParams.data.clamps[a]={bottom:b,top:c}},c.Tweenable.prototype.removeClamp=function(a){return delete this._tweenParams.data.clamps[a]},c.Tweenable.prototype.filter.clamp={afterTween:a,afterTweenEnd:a},b.clamps={}})(this);
